{% extends 'app/basetemplate.html' %}

{% block content %}
<div class="container mt-4">
    <h2 class="mb-3">会社の一覧</h2>
    <form method="post" action="{% url 'company_list' %}">
        {% csrf_token %}
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>会社名</th>
                    <th>第一志望</th>
                    <th>第二志望</th>
                    <th>第三志望</th>
                    <th>第四志望</th>
                    <th>その他</th>
                    <th>詳細</th>
                    <th>操作</th>
                </tr>
            </thead>
            <tbody>
                {% for company in companies %}
                <tr>
                    <!-- Display the name as a text input to make it editable -->
                    <td>
                        <input type="text" name="name_{{ company.id }}" value="{{ company.name }}" class="form-control" required>
                    </td>
                    <!-- Add checkboxes for preference levels -->
                    <td><input type="checkbox" name="first_choice_{{ company.id }}" {% if company.preference_level == 1 %}checked{% endif %}></td>
                    <td><input type="checkbox" name="second_choice_{{ company.id }}" {% if company.preference_level == 2 %}checked{% endif %}></td>
                    <td><input type="checkbox" name="third_choice_{{ company.id }}" {% if company.preference_level == 3 %}checked{% endif %}></td>
                    <td><input type="checkbox" name="fourth_choice_{{ company.id }}" {% if company.preference_level == 4 %}checked{% endif %}></td>
                    <td><input type="checkbox" name="other_choice_{{ company.id }}" {% if company.preference_level == 5 %}checked{% endif %}></td>
                    <!-- Link to company detail page -->
                    <td>
                        <a href="{% url 'company_detail' company.pk %}" class="btn btn-primary btn-sm">詳細</a>
                    </td>
                    <!-- Submit button for this row -->
                    <td>
                        <button type="submit" name="save_{{ company.id }}" class="btn btn-success btn-sm">保存</button>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </form>
</div>
{% endblock %}
